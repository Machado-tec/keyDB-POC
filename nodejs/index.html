<!DOCTYPE html>
<html>
<head>
  <title>KeyDB Log</title>
</head>
<body>
  <h1>Real-time Log of KeyDB Updates</h1>
  <div id="log1">keydb_01: No updates yet.</div>
  <div id="log2">keydb_02: No updates yet.</div>
  <div id="log3">keydb_03: No updates yet.</div>
  
  <button id="interval-btn">Update Interval: 10 seconds</button>

  <script>
    const eventSource = new EventSource('/events');
    
    eventSource.onmessage = function(event) {
      const data = event.data;
      if (data.startsWith('keydb_01')) {
        document.getElementById('log1').innerHTML = data;
      } else if (data.startsWith('keydb_02')) {
        document.getElementById('log2').innerHTML = data;
      } else if (data.startsWith('keydb_03')) {
        document.getElementById('log3').innerHTML = data;
      }
    };

    // Handle the button click to change the update interval
    const intervalBtn = document.getElementById('interval-btn');
    intervalBtn.onclick = function() {
      fetch('/decrease-interval', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
          intervalBtn.textContent = `Update Interval: ${data.newInterval} seconds`;
        });
    };
  </script>
</body>
</html>